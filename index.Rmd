---
title: "Who is into Green Infrastructure?"
author: Sun Ho Hwang
subtititle: Motivation of Green Infrastructure Parcipation
---

# Introduction

 Due to global warming, one of the difficulties that the urban
environment face is the increase of precipitation. There is a chance
that this will lead to water pollution as the stormwater that runs
through the urban impervious surface collects pollutants and enters the
sewer system. There has been continuous effort to implement green
infrastructure to adapt to this environmental change. However there are
certain limits because this involves the voluntary participation of
individual households. This study will help understand the motivation of the participants of the past rain barrel project and help
guide environmental organizations to plan how to increase participation.

This project will analyze the motivation of households participating in the rain barrel project bby comparing contributing factors which are the education attainment and median income at the census tract level. The education attainment and income of the people participating in this project will be represented as a map. Then the shapefile of the rain barrels will be overlapped in order to analyze the demographic characteristic of households participating in the project. 


# Materials and methods

[~ 200 words]

Narrative: Clear narrative description of the data sources and methods. Includes data from at least two sources that were integrated / merged in R.

Code: The code associated with the project is well organized and easy to follow. Demonstrates mastery of R graphics and functions.

Data: The underlying data are publicly accessible via the web and downloaded/accessed within the Rmd script. If you want to use your own data, you must make it available on a website (e.g. Figshare) so that others are able to re-run your code.

You can do bullets like this:

* The first most important thing
* The second most important thing
* The third most important thing

You can do numbers like this:

1. The first most important thing
2. The second most important thing
3. The third most important thing

See [http://rmarkdown.rstudio.com/](http://rmarkdown.rstudio.com/) for all the amazing things you can do.


Here's my first code chunk.
```{r}
1+2
```

Load any required packages in a code chunk (you may need to install some packages):

```{r, message=F, warning=F}
library(acs)
install.packages("choroplethr")
library(choroplethr)
library(ggplot2)
library(choroplethrMaps)
library(ggmap)
install.packages("mapproj")
library(mapproj)
library(maps)
library(kableExtra)
knitr::opts_chunk$set(cache=TRUE)  # cache the results for quick compiling
```

## Download and clean all required data
```{r}

#register your api key
#use personal account not ub gmail account
register_google("< AIzaSyDKWjMtKISTGUyr4aw9AnVbRu5blAPDnlE >")


#1.Income map


#census tract level for Income, choroplethr
?df_ny_tract_demographics
#check data
data("df_ny_tract_demographics")
View(df_ny_tract_demographics)
#make value column value
df_ny_tract_demographics$value=df_ny_tract_demographics$per_capita_income
#create a choropleth map

tract_choropleth(df_ny_tract_demographics,state_name = "new york" ,title="Per Capita Income Estimates",legend = "Dollars",num_colors = 7)

#state names

?state.regions
data("state.regions")
View(state.regions)

#But we have to frame it


#Problem: location and time frame
#set area to Buffalo city, year should include 2015 and 2016
#area:leave and overlap with shapefile later

#Problem1: how about time frame?
#Problem2: data for Buffalo missing? How should I deal with missing values?
#maybe try again with tidycensus
#https://walker-data.com/tidycensus/articles/basic-usage.html


```

```{r, results='asis'}
data %>% 
  slice(1:10) %>% #show only 1:n rows
  kable(digits=2,align="c")%>% #make table and round to two digits
  kable_styling(bootstrap_options = 
                  c("striped", "hover", "condensed", "responsive")) #apply other formatting


#2 educational attainment
#url: https://data.census.gov/cedsci/table?q=educational%20attainment&tid=ACSST5Y2019.S1501&hidePreview=true
?get_acs_data()
ed<-get_acs_data("S1501","county",endyear=2019,span=5,column_idx = )


#how to figure out column_idx numbers

```

Add any additional processing steps here.

# Results

[~200 words]

Tables and figures (maps and other graphics) are carefully planned to convey the results of your analysis. Intense exploration and evidence of many trials and failures. The author looked at the data in many different ways before coming to the final presentation of the data.

Show tables, plots, etc. and describe them.

```{r, fig.width=6, fig.height=3, fig.cap="Map of completely random data"}
m <- leaflet(data) %>% 
  addTiles() %>% 
  addCircleMarkers(~x, ~y, radius = ~size,color = ~as.factor(category)) %>% 
  addPopups(~x[2], ~y[2], "Random popup")
m  # a map with the default OSM tile layer
```


```{r}
data %>% 
  ggplot(aes(x=x,y=y,col=category))+
  geom_point()
```

# Conclusions

[~200 words]

Clear summary adequately describing the results and putting them in context. Discussion of further questions and ways to continue investigation.

# References

All sources are cited in a consistent manner
